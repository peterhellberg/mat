#!/usr/bin/env ruby

require 'mat'
require 'json'

def get_data(query)
  if query.match(/^\d+$/)
    Mat.api.foodstuff(query)
  else
    Mat.api.foodstuffs(query)
  end
end

def search(query)
  puts JSON.pretty_generate get_data(query)
rescue Mat::HTTP::Exception
  warn "Nothing found"
end

search(ARGV.first) if ARGV.any?
